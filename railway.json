{
  "$schema": "https://railway.app/railway.schema.json",
  "deploy": {
    "runCommand": null,
    "startCommand": null,
    "watchPatterns": [],
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 3
  },
  "services": [
    {
      "name": "backend",
      "build": {
        "builder": "NIXPACKS",
        "nixpacksPlan": {
          "providers": ["python"]
        }
      },
      "startCommand": "uvicorn app.main:app --host 0.0.0.0 --port $PORT",
      "source": {
        "type": "image",
        "image": null,
        "directory": "backend"
      },
      "env": [
        {
          "name": "STRIPE_API_KEY",
          "value": null
        },
        {
          "name": "STRIPE_PUBLIC_KEY",
          "value": null
        },
        {
          "name": "IPFS_API",
          "value": "/dns/api.infura.io/tcp/5001/https"
        }
      ]
    },
    {
      "name": "frontend",
      "build": {
        "builder": "NIXPACKS",
        "nixpacksPlan": {
          "providers": ["node"]
        }
      },
      "startCommand": "serve -s build -l $PORT",
      "source": {
        "type": "image",
        "image": null,
        "directory": "frontend"
      },
      "env": [
        {
          "name": "REACT_APP_SERVER_URL",
          "value": null
        },
        {
          "name": "STRIPE_PUBLIC_KEY",
          "value": null
        }
      ]
    }
  ]
}
